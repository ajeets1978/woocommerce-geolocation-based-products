jQuery(document).ready(function(t){"use strict";t.wc_geolocation_based_products_admin={runTipTip:function(){t("#tiptip_holder").removeAttr("style"),t("#tiptip_arrow").removeAttr("style"),t(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})},reInitRows:function(){t("table.wc-glbp-settings").find("tr.entry").each(function(e){var c=String(t("input.wc-glbp-country",this).prop("name")),o=c.replace(/row\[\d+\]/,"row["+e+"]");t("input.wc-glbp-country",this).prop("name",o),c=String(t("input.wc-glbp-region",this).prop("name")),o=c.replace(/row\[\d+\]/,"row["+e+"]"),t("input.wc-glbp-region",this).prop("name",o),c=String(t("input.wc-glbp-city",this).prop("name")),o=c.replace(/row\[\d+\]/,"row["+e+"]"),t("input.wc-glbp-city",this).prop("name",o),c=String(t("input.wc-glbp-products",this).prop("name")),o=c.replace(/row\[\d+\]/,"row["+e+"]"),t("input.wc-glbp-products",this).prop("name",o),c=String(t("select.wc-glbp-categories",this).prop("name")),o=c.replace(/row\[\d+\]/,"row["+e+"]"),t("select.wc-glbp-categories",this).prop("name",o),c=String(t("input.wc-glbp-test",this).prop("name")),o=c.replace(/row\[\d+\]/,"row["+e+"]"),t("input.wc-glbp-test",this).prop("name",o)})},init:function(){t("table.wc-glbp-settings").on("click",".wc-glbp-insert-row",function(e){e.preventDefault();var c=t(this).parents("table.wc-glbp-settings"),o="";o+='<tr class="entry">',o+='<td class="wc-glbp-column-remove-row">',o+='<input type="checkbox" value="remove" class="wc-glbp-remove-row-cb" />',o+="</td>",o+='<td class="wc-glbp-column-country" width="5%">',o+='<input type="text" name="row[0][country]" value="" placeholder="'+wc_geolocation_based_products_local.placeholderCountry+'" maxlength="2" class="wc-glbp-country" />',o+="</td>",o+='<td class="wc-glbp-column-region" width="10%">',o+='<input type="text" name="row[0][region]" value="" placeholder="'+wc_geolocation_based_products_local.placeholderRegion+'" class="wc-glbp-region" />',o+="</td>",o+='<td class="wc-glbp-column-city" width="18%">',o+='<input type="text" name="row[0][city]" value="" placeholder="'+wc_geolocation_based_products_local.placeholderCity+'" class="wc-glbp-city" />',o+="</td>",o+='<td class="wc-glbp-column-product-categories" width="30%">',o+='<select name="row[0][product_categories][]" class="wc-enhanced-select wc-glbp-categories" multiple="multiple" data-placeholder="'+wc_geolocation_based_products_local.placeholderSelectCategories+'" style="width: 50%;">',o+='<option value=""></option>';var l=t.parseJSON(wc_geolocation_based_products_local.categories);l.length&&t(l).each(function(t,e){o+='<option value="'+e.term_id+'">'+e.name+"</option>"}),o+="</select>",o+="</td>",o+='<td class="wc-glbp-column-products" width="30%">',o+='<input type="hidden" class="wc-product-search wc-glbp-products" data-multiple="true" name="row[0][products]" style="width: 50%;" data-placeholder="'+wc_geolocation_based_products_local.placeholderSearchProducts+'" data-action="woocommerce_json_search_products" />',o+="</td>",o+='<td class="wc-glbp-column-test" width="2%">',o+='<input type="checkbox" name="row[0][test]" value="" class="wc-glbp-test" />',o+="</td>",o+="</tr>",c.find("tbody").append(o),t(document.body).trigger("wc-enhanced-select-init"),t.wc_geolocation_based_products_admin.reInitRows()}),t("table.wc-glbp-settings").on("click",".wc-glbp-remove-row",function(e){e.preventDefault();var c=t(this).parents("table.wc-glbp-settings");c.find(".wc-glbp-remove-row-cb:checked").each(function(){1===c.find("tr.entry").length?(c.find(".wc-glbp-remove-row-cb").prop("checked",!1),c.find(".wc-glbp-test").prop("checked",!1),c.find(".wc-glbp-country").val(""),c.find(".wc-glbp-region").val(""),c.find(".wc-glbp-city").val(""),c.find("select.wc-product-search").select2("val",""),c.find("select.wc-enhanced-select").select2("val","")):t(this).parents("tr.entry").eq(0).remove()}),t.wc_geolocation_based_products_admin.reInitRows()}),t("table.wc-glbp-settings").on("click",".wc-glbp-test",function(){return t(this).parents("table.wc-glbp-settings").find(".wc-glbp-test").not(this).prop("checked",!1),!0}),t.wc_geolocation_based_products_admin.runTipTip()}},t.wc_geolocation_based_products_admin.init()});